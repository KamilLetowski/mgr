\chapter{Algorytmy zach³anne}
	Istnieje wiele algorytmów zach³annych pozwalaj¹cych otrzymaæ optymalne rozwi¹zanie dla problemu znalezienia najkrótszej trasy. W poni¿szym rozdziale opisane dok³adniej zosta³o dzia³anie algorytmu najbli¿szego s¹siada, algorytmu najmniejszej krawêdzi oraz algorytmu a*. W celu zoptymalizowania otrzymanych rozwi¹zañ zastosowane zostan¹ operatory 2-opt oraz 3-opt.

\section{Algorytm najbli¿szego s¹siada}
	Poni¿szy podrozdzia³ przybli¿y dzia³anie algorytmu najbli¿szego s¹siada. Wszystkie wymagane dla algorytmu operacje zostan¹ opisane krok po kroku oraz przedstawione na krótkim przyk³adzie. Jak sama nazwa wskazuje jest to algorytm polegaj¹cy na odwiedzaniu, zaczynaj¹c od wybranego wierzcho³ka pocz¹tkowego nastêpnego wierzcho³ka znajduj¹cego siê najbli¿ej poprzednio odwiedzonego. 

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.5]{grafika/ans_graph.png}
	\caption{Schemat algorytmu najbli¿szego s¹siada}
	\label{nearest_neighbour}
\end{figure}

Na rysunku 4.1 zosta³ pokazany schemat blokowy algorytmu najbli¿szego s¹siada. Pierwszym krokiem jest wyznaczenie wyznaczenie wierzcho³ka startowego. Nastêpnie dla aktualnego wierzcho³ka nale¿y obliczyæ najkrótsz¹ krawêdŸ ³¹cz¹c¹ aktualny wierzcho³ek spoœród kolekcji wierzcho³ków nieodwiedzonych. Wybór najlepszej opcji po³¹czenia dwóch wierzcho³ków nale¿y dodaæ do rozwi¹zania, a drugi wierzcho³ek staje siê aktualnym od którego bêdziemy wyznaczaæ kolejne odleg³oœci do nieodwiedzonych jeszcze wierzcho³ków. Czynnoœci nale¿y powtarzaæ do momentu odwiedzenia wszystkich wierzcho³ków w podanym grafie. Na samym koñcu wystarczy jedynie po³¹czyæ ostatni wierzcho³ek z pocz¹tkowym. Po wykonaniu wszystkich kroków algorytm najbli¿szego s¹siada powinien zwróciæ optymalne dla niego rozwi¹zanie.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.3]{grafika/ans_last.png}
	\caption{Algorytm najbli¿szego s¹siada}
	\label{nearest_neighbour}
\end{figure}

	Aby lepiej zobrazowaæ otrzymanie rozwi¹zania przez algorytm przedstawiono poni¿ej na rysunku 5.1 jego dzia³anie na przyk³adzie. W podanym przypadku nale¿y za³o¿yæ ¿e wierzcho³ek nr 2 jest wierzcho³kiem startowym, wiêc nale¿y ustawiæ go jako aktualny w danym momencie. Po obliczeniu wszystkich odleg³oœci prowadzonych do wierzcho³ków nieodwiedzonych wychodzi, ¿e najkrótsza krawêdŸ prowadzi do wierzcho³ka nr 4, wiêc nale¿y do³¹czyæ wybrana krawêdŸ do rozwi¹zania i oznaczyæ nowy aktualny wierzcho³ek, który staje siê równie¿ odwiedzonym. W podanym grafie znajduj¹ siê nadal nieodwiedzone wierzcho³ki, dlatego algorytm powtarza krok nr 2 w celu znalezienia kolejnej najkrótszej krawêdzi. Kolejn¹ najlepsz¹ odnalezion¹ w danym momencie krawêdzi¹, któr¹ algorytm doda do rozwi¹zania bêdzie krawêdŸ o wartoœci 3 ³¹cz¹ca aktualny wierzcho³ek z wierzcho³kiem nr 5. Kroki 4, 5 oraz 6 przedstawiaj¹ kolejne powtarzalne iteracje algorytmu dochodz¹c w ostatnim kroku do utworzenia cyklu i tym zakoñczeniu dzia³ania algorytmu. W ten sposób otrzymano zach³anne rozwi¹zanie 2 - 4 - 5 - 3 - 1 - 2. Warto zaznaczyæ, ¿e dziêki oznaczaniu wierzcho³ków jako odwiedzone nie trzeba w ¿adnej iteracji martwiæ siê o to czy do³¹czenie kolejnej krawêdzi z nieodwiedzonym wierzcho³kiem spowoduje utworzenie niepo¿¹danego cyklu.

\section{Algorytm najmniejszej krawêdzi}
	Kolejny podrozdzia³ algorytmów zach³annych zosta³ poœwiêcony dok³adniejszemu opisie dzia³ania algorytmu najmniejszej krawêdzi, który w swoim dzia³aniu przypomina algorytm poszukuj¹cy minimalnego drzewa rozpinaj¹cego, poprzez do³¹czenie do aktualnego rozwi¹zania najkrótszych wœród dopuszczalnych krawêdzi.	Aby otrzymaæ zach³anne rozwi¹zanie przy wykorzystaniu algorytmu najmniejszej krawêdzi nale¿y wykonaæ nastêpuj¹ce kroki przedstawione schemacie blokowym na rysunku 4.3.
	
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{grafika/ank_graph.png}
	\caption{Schemat algorytmu najmniejszej krawêdzi}
	\label{ank}
\end{figure}

Algorytm rozpoczyna swoje dzia³anie od posortowania wag krawêdzi miêdzy wszystkimi wierzcho³kami oraz umieszcza podane odleg³oœci w kolekcji. Nastêpnie wybierana jest zawsze krawêdŸ o najmniejsze wartoœci oraz od razu usuwana jest z podanej kolekcji. Aby wybrane po³¹czenie miêdzy wierzcho³kami zosta³o dodane do rozwi¹zania musi spe³niaæ warunek nie utworzenia cyklu oraz wierzcho³ka o trzech krawêdziach, w przeciwnym wypadku po³¹czenie jest pomijane oraz algorytm wybiera kolejn¹ krawêdŸ. Iteracje s¹ powtarzane do momentu, a¿ liczba dodanych po³¹czeñ jest równa liczbie wszystkich wierzcho³ków. W przypadku ostatniej iteracji wyznaczona krawêdŸ nie musi ju¿ spe³niaæ warunku z utworzeniem cyklu. Po zakoñczeniu dzia³ania algorytmu otrzymano optymalne rozwi¹zanie dla algorytmu najmniejszej krawêdzi.
	
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.5]{grafika/ank_initial_finish.png}
	\caption{Pocz¹tkowe rozmieszczenie wierzcho³ków}
	\label{ank}
\end{figure}

Dzia³anie algorytmu przedstawione zosta³o na rysunku 4.4 przedstawiaj¹cym przyk³ad ze szeœcioma losowo rozmieszczonymi wierzcho³kami. Natomiast wizualizacja kolejnych kroków algorytmu zosta³a przedstawiona na rysunku 4.5. Po posortowaniu wszystkich dostêpnych krawêdzi dla ka¿dego wierzcho³ka mo¿na rozpocz¹æ dzia³anie algorytmu.
	
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.30]{grafika/ank_steps_final.png}
	\caption{Algorytm najmniejszej krawêdzi}
	\label{ank_new2}
\end{figure}

	Podczas pierwszej iteracji okazuje siê, ¿e s¹ aktualnie dwie krawêdzie z najmniejsz¹ wag¹ o wartoœci 3 (1 - 2 oraz 4 - 5), nie ma wiêc znaczenia, która krawêdŸ algorytm doda w pierwszej kolejnoœci, poniewa¿ ¿adna z wybranych nie utworzy w tym momencie cyklu. W przypadku drugiej iteracji algorytm wybiera krawêdŸ o najmniejszej wadze, do³¹czaj¹c j¹ do aktualnego rozwi¹zania. Analogiczna sytuacja do pierwszej iteracji wystêpuje w trzeciej iteracji, gdzie nie ma ró¿nicy, która krawêdŸ zostanie do³¹czona do rozwi¹zania. Czwarta iteracja pokazuje sytuacje, w której nie mo¿na po³¹czyæ krawêdzi 3 - 4, poniewa¿ utworzy³oby to niedozwolony w trakcie algorytmu cykl, dlatego tym razem wybierane jest inne po³¹czenie o najmniejszej wadze (4 - 6). Kolejny krok przedstawia przedstawia przypadek, gdzie nie jest mo¿liwe po³¹czenie krawêdzi 2 - 4 (najmniejsza wartoœæ - 7), poniewa¿ spowodowa³oby dla wierzcho³ka nr 4 utworzenie trzech wychodz¹cych z niego krawêdzi, wiêc do rozwi¹zania dochodzi kolejna najmniejsza krawêdŸ 1 - 6. W ostatnim kroku, pomimo dostêpnych krawêdzi z mniejsz¹ wag¹ wybierana zosta³a krawêdŸ 2 - 3, poniewa¿ tylko ona nie spowoduje utworzenia wierzcho³ka o trzech krawêdziach. W takim wypadku koñcz¹c dzia³anie algorytmu otrzymano rozwi¹zanie 1 - 6 - 4 - 5 - 3 - 2 - 1.
	
\section{Algorytm A*}
	Ostatnim omówionym rozwi¹zaniem do znajdowania najkrótszej œcie¿ki w grafie jest algorytm a*, w którym zawsze zostanie znalezione najkorzystniejsze zach³anne rozwi¹zanie. Strategia gwarantuje, ¿e ka¿dy wierzcho³ek zostanie odwiedzony, przy czym dokonuje w danym momencie najlepszych wyborów. Dla struktur drzewiastych algorytm tworzy najlepsze rozwi¹zania. G³ówn¹ zasad¹ algorytmu a* jest minimalizacja funkcji kosztu oraz funkcji heurystycznej, gdzie ta ostatnia musi spe³niaæ dwa wymagane warunki tj. warunek dopuszczalnoœci i warunek monotonicznoœci. Warunek dopuszczalnoœci polega na tym, aby funkcja heurystyczna za bardzo minimalizowa³a koszt, a przesadza³a przy maksymalizacji zysku. Natomiast warunek monotonicznoœci mówi, ¿e oszacowywanie wyniku musi byæ coraz mniej optymistyczne w momencie zbli¿ania siê do rozwi¹zania. Jeœli przestrzeñ przeszukiwañ zawieraæ bêdzie œcie¿ki to mo¿na wówczas sprowadziæ problem do problemu poszukiwania najkrótszej œcie¿ki w grafie. W danym przypadku funkcj¹ heurystyczn¹ bêdzie wówczas iloczyn liczby krawêdzi do wybrania i najmniejsza wartoœæ krawêdzi. Zapewnia to w ten sposób, ¿e taka funkcja jest nadmiernie optymistyczna.
		
<po badaniach powstanie tutaj schemat blokowy oraz przyk³ad, tak jak w poprzednich algorytmach, poniewa¿ algorytm jest jeszcze dopracowywany>

\section{Optymalizacja otrzymanych rozwi¹zañ}
	W ostatnim podrozdziale skupimy siê na sposobach optymalizacji otrzymanych przez algorytmy zach³anne rozwi¹zañ. Dok³adniej omówiona zostanie metoda 2-opt oraz metoda 3-opt.
\subsection{Metoda 2-opt}
	Metoda optymalizacyjna 2-opt polega na pozbyciu siê z cyklu dwóch krawêdzi w celu zast¹pienia ich innymi krawêdziami w taki sposób, aby otworzyæ zupe³nie inny cykl. Iteracje mo¿na powtarzaæ dla ka¿dej pary krawêdzi, oprócz tych s¹siaduj¹cych ze sob¹, poniewa¿ ich zamienienie nie przynios³oby ¿adnej modyfikacji. Metoda nie ma na celu zmiany po³o¿enia wierzcho³ków, jedynie kolejnoœci ich odwiedzania. Po wykonaniu ca³ej optymalizacji, nale¿y sprawdziæ która modyfikacja przynios³a najlepszy efekt skrócenia d³ugoœci cyklu. W przypadku je¿eli ¿adna modyfikacja nie da³a lepszego rozwi¹zania, nie nale¿y modyfikowaæ rozwi¹zania. Algorytm mo¿na wykonywaæ wielokrotnie, w ten sposób zostanie zrealizowane minimum lokalne. Dla lepszego przedstawienia dzia³ania metody 2-opt, nale¿y spojrzeæ na rysunek 5.4.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.7]{grafika/2opt.png}
	\caption{Metoda 2-opt}
	\label{2opt}
\end{figure}	

\subsection{Metoda 3-opt}

	W odró¿nieniu do algorytmu 2-opt, w metodzie 3-opt rozwa¿ane s¹ wszystkie cykle, które mo¿na uzyskaæ wymieniaj¹c trzy krawêdzie z cyklu aktualnego, przy czym jest mo¿liwe wykonanie tego na wiele sposobów tak jak zosta³o to przedstawione na rysunku 5.5.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{grafika/3opt.png}
	\caption{Metoda 3-opt}
	\label{3opt}
\end{figure}	






Prosta tabela \ref{tabela_1}.

\begin{table}[htb]
\centering
\caption[Krótki podpis tabeli 1 -- do spisu treœci]{D³ugi podpis tabeli 1, który pojawi siê nad ni¹. Jak chcecie podpis pod tabel¹, umieœæcie caption przed samym end\{table\} - ale to niezgodne z wytycznymi.}
\begin{tabular}{|c|c|c|c|}
\hline
Kolumna 1 & Kolumna 2 & Kolumna 3 & Kolumna 4 \\\hline
Kolumna 1 & Kolumna 2 & Kolumna 3 & Kolumna 4 \\\hline
Kolumna 1 & Kolumna 2 & Kolumna 3 & Kolumna 4 \\\hline
Kolumna 1 & Kolumna 2 & Kolumna 3 & Kolumna 4 \\\hline
\end{tabular}
\label{tabela_1}
\end{table}

Przyk³adowa tabela \ref{tabela_2}, nieco bardziej skomplikowana.

\begin{table}[htb]
\centering
\caption[Krótki podpis tabeli 2 -- do spisu treœci]
{D³ugi podpis tabeli 2, który pojawi siê nad ni¹}
\scalebox{0.}{
\begin{tabular}{|>{\bfseries}!a||^c|^c|^c|^c|^c|^c|^c|^c|^c|^c|}
\hline
\rowcolor{Gray}
\rowstyle{\bfseries}
Kolumna wyró¿niona & \makecell{Kolumna \\ pierwsza} & \makecell{Kolumna \\ druga}& \makecell{Kolumna \\ kolejna \\ d³uga \\ nazwa} & \makecell{Przeno- \\ szenie \\ s³owa} & \makecell{Kolumna \\ kolejna} & \makecell{Kolumna \\ kolejna} & \makecell{Kolumna \\ kolejna} & \makecell{Kolumna \\ kolejna} & \makecell{Kolumna \\ kolejna} & \makecell{Kolumna \\ kolejna} \\\hline
Wiersz jakiœ tam & 1 & 2 & \cellcolor{LightGray}3 & 4 & 5 & 6 & 7 & \cellcolor{LightGray}8 & 9 & 10 \\\hline \hline
Wiersz ze statystykami & 11,56 & 92,38 & 827,21 & 41,92 & 29,71 & 28,77 & \cellcolor{LightRed}29,61 & 55,02 & 72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & \textbf{92,38} & 827,21 & 41,92 & 29,71 & \cellcolor{LightGreen}28,77 & 29,61 & 55,02 & 72,33 & \cellcolor{LightRed}95,82 \\\hline
Wiersz ze statystykami & 11,56 & \textbf{92,38} & 827,21 & 41,92 & 29,71 & 28,77 & 29,61 & 55,02 & \cellcolor{LightGreen}72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & 92,38 & \cellcolor{LightGreen}827,21 & 41,92 & 29,71 & 28,77 & 29,61 & 55,02 & 72,33 & 95,82 \\\hline
Wiersz ze statystykami & \cellcolor{LightGreen}11,56 & 92,38 & \cellcolor{LightRed}827,21 & 41,92 & 29,71 & 28,77 & 29,61 & 55,02 & 72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & 92,38 & 827,21 & \textbf{41,92} & 29,71 & 28,77 & 29,61 & 55,02 & \cellcolor{LightRed}72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & 92,38 & 827,21 & 41,92 & 29,71 & 28,77 & \cellcolor{LightRed}29,61 & 55,02 & 72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & \cellcolor{LightGreen}92,38 & 827,21 & 41,92 & 29,71 & 28,77 & \cellcolor{LightGreen}29,61 & 55,02 & 72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & \cellcolor{LightRed}92,38 & 827,21 & 41,92 & 29,71 & 28,77 & \textbf{29,61} & 55,02 & 72,33 & 95,82 \\\hline
Wiersz ze statystykami & 11,56 & 92,38 & 827,21 & 41,92 & \cellcolor{LightRed}29,71 & \cellcolor{LightRed}28,77 & 29,61 & 55,02 & 72,33 & 95,82 \\\hline \hline
\end{tabular}
}
\label{tabela_2}
\end{table}